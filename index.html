<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NodeJS Progress</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="header">
    <button onclick="location.href='vuejs.html'">VueJs</button>
    <button onclick="location.href='index.html'">NodeJs</button>
  </div>

  <h1>📘 Zakaria’s Node Js Learning Report</h1>
  <p style="text-align: center;">This report documents my Node.js learning journey from basic scripting to backend
    development principles.</p>

  <div class="tabs">
    <button onclick="showLog('log10')">June 10</button>
    <button onclick="showLog('log11')">June 11</button>
    <button onclick="showLog('log12')">June 12</button>
    <button onclick="showLog('log13')">June 13</button>
    <!-- Add more buttons for other dates if needed -->
  </div>

  <!-- June 10 log -->
  <div class="section" id="log10">
    <h2>📅 June 10, 2025 — Node.js Environment & Modules</h2>

    <h3>✅ Accomplishments</h3>
    <ul>
      <li>Node.js was already installed on my machine because Vue CLI depends on it.<br>
        I verified the installation using the terminal:<br>
        <code>node -v</code> → <strong>v22.16.0</strong><br>
        <code>npm -v</code> → <strong>10.9.2</strong><br>
        Environment is ready for backend development.
      </li>
      <li>Created a working folder: <code>node-first-day</code> and opened it in VS Code.</li>
      <li>Ran first script using <code>node hello.js</code> — printed "Hello from Node.js!".</li>
      <li>Practiced understanding Node.js event loop with <code>setTimeout</code> example.</li>
      <li>Created and used a CommonJS module using <code>require()</code> to import <code>math.js</code>.</li>
      <li>Used the built-in <code>fs</code> module to create a file called <code>note.txt</code>.</li>
      <li>Used the built-in <code>path</code> module to get the full absolute path of a file.</li>
    </ul>

    <h3>📂 Practice Folder Setup</h3>
    <pre><code>mkdir node-first-day
cd node-first-day
code .
</code></pre>
    <ol style="padding-left: 25px;">
      <h4>📄 First Script</h4>
      <p>This shows the terminal output of my very first Node.js script, <code>hello.js</code>, which prints "Hello from
        Node.js!" to confirm the runtime is working.</p>
      <img src="img/10-juin---1.jpg" alt="hello.js terminal output" width="100%">

      <h4>🔁 Event Loop Example</h4>
      <p>This example demonstrates how the Node.js event loop works. The output proves that asynchronous code like
        <code>setTimeout</code> is executed after synchronous code.
      </p>
      <img src="img/10-juin---2.jpg" alt="eventLoop.js terminal output" width="100%">

      <h4>📦 CommonJS Module Example</h4>
      <p>I created a <code>math.js</code> file that exports basic operations. Then I imported it using
        <code>require()</code> in another script. This shows how CommonJS modules work in Node.js.
      </p>
      <img src="img/10-juin---3.jpg" alt="CommonJS math.js + main.js terminal output" width="100%">

      <h4>📂 File System Module (fs)</h4>
      <p>I used the built-in <code>fs</code> module to write a file called <code>note.txt</code>. This output shows that
        the file was successfully created with the desired content.</p>
      <img src="img/10-juin---4.jpg" alt="fs module output - note.txt created" width="100%">

      <h4>🧭 Path Module Example</h4>
      <p>This image shows the use of the <code>path</code> module to construct and display the absolute path of a file,
        helping with dynamic file handling in Node.js.</p>
      <img src="img/10-juin---5.jpg" alt="Path module output - absolute path" width="100%">
    </ol>
    <h3>🧠 Key Learnings</h3>
    <p>
      I now understand how Node.js runs JavaScript code outside the browser using its own runtime.
      The event loop helped me realize how asynchronous operations are handled.
      I also practiced modular code using CommonJS syntax and saw how built-in modules like <code>fs</code> and
      <code>path</code> can interact with the system directly.
    </p>
  </div>

  <!-- June 11 log -->
  <div class="section" id="log11" style="display: none;">
    <h2>📅 June 11, 2025 — HTTP Server and Routing (Node.js Core)</h2>

    <h3>✅ Accomplishments</h3>
    <ul>
      <li>Created a basic HTTP server using Node’s built-in <code>http</code> module.</li>
      <li>Served a static HTML file (<code>index.html</code>) from a <code>public</code> folder using <code>fs</code>.
      </li>
      <li>Handled basic routing for <code>/</code>, <code>/home</code>, and <code>/api</code> endpoints.</li>
      <li>Sent a JSON response with user data at <code>/api</code> route using
        <code>res.end(JSON.stringify(...))</code>.
      </li>
      <li>Tested 404 responses when an unknown route is visited.</li>
      <li>Organized the project folder: separated HTML, logic, and made it easy to scale later with Fastify.</li>
    </ul>

    <h3>📂 Practice Folder Setup</h3>
    <pre><code>mkdir node-second-day
 cd node-second-day
 code .

 mkdir public, routes, controllers
 touch server.js, routes/mainRoutes.js, controllers/mainController.js, public/index.html
    
    <span style="color: blue;">D:&lt;node-second-day&gt;</span>
    │   server.js
    │
    ├───<span style="color: blue;">controllers</span>
    │       mainController.js
    │
    ├───<span style="color: blue;">public</span>
    │       index.html
    │
    └───<span style="color: blue;">routes</span>
            mainRoutes.js

</code></pre>

    <ol style="padding-left: 25px;">
      <li>
        <h4>🌐 HTTP Server Terminal</h4>
        <p>Terminal showing server running on <code>localhost:3000</code> using <code>http.createServer()</code>.</p>
        <img src="img/11-juin---1.jpg" alt="HTTP server terminal output" width="100%">
      </li>
      <li>
        <h4>📄 index.html Served</h4>
        <p>Node.js served this simple HTML file using the <code>fs</code> module.</p>
        <img src="img/11-juin---2.jpg" alt="Index page from public folder served" width="100%">
      </li>
      <li>
        <h4>📦 JSON Response at /api</h4>
        <p>This shows the browser displaying the JSON response from <code>/api</code>.</p>
        <img src="img/11-juin---3.jpg" alt="JSON API response in browser" width="100%">
      </li>
      <li>
        <h4>❌ 404 Route Handling</h4>
        <p>Visiting an unknown route returns a custom plain text 404 response.</p>
        <img src="img/11-juin---4.jpg" alt="404 error output in browser" width="100%">
      </li>
    </ol>

    <h3>🧠 Key Learnings</h3>
    <p>
      I now understand how Node.js can create a server from scratch using the <code>http</code> module.
      I practiced routing logic and learned how to serve both HTML content and JSON responses.
      This is the foundation for building REST APIs and serving data to the Vue frontend.
    </p>

    <h3>🔜 What’s Next (Day 3 Preview)</h3>
    <p>
      Tomorrow we will upgrade to <strong>Fastify</strong> to simplify server code, handle middleware, and support
      POST requests,
      preparing for user login and registration features.
    </p>
  </div>


  <!-- June 12 log -->
  <div class="section" id="log12" style="display: none;">
    <h2>📅 June 12, 2025 — Fastify Setup, Routes, and POST Handling</h2>

    <h3>✅ Accomplishments</h3>
    <ul>
      <li>Installed Fastify using <code>npm install fastify</code>.</li>
      <li>Created a Fastify server in <code>server.js</code> with a basic route <code>/</code> that returns a welcome
        message.</li>
      <li>Added a new route <code>/about</code> that returns a JSON object.</li>
      <li>Handled a <code>POST</code> request at <code>/login</code> route with Fastify body parsing enabled.</li>
      <li>Tested API endpoints using browser for GET and PowerShell Invoke-RestMethod for POST requests.</li>
      <li>Restructured project folders for clarity (added <code>routes</code> and <code>controllers</code> directories).
      </li>
    </ul>

    <h3>📂 Practice Folder Setup</h3>
    <pre><code>mkdir node-third-day
 cd node-third-day
 npm init -y
 npm install fastify

 mkdir routes controllers
 touch server.js routes/mainRoutes.js controllers/mainController.js

 <span style="color: blue;">D:&lt;node-third-day&gt;</span>
    │   server.js
    │
    ├───<span style="color: blue;">controllers</span>
    │       mainController.js
    │
    └───<span style="color: blue;">routes</span>
            mainRoutes.js
</code></pre>

    <ol style="padding-left: 25px;">
      <li>
        <h4>⚙️ Fastify Server Running</h4>
        <p>The terminal shows the Fastify server running on <code>http://localhost:3000</code>.</p>
        <pre><code>const fastify = require('fastify')({
   logger: {
     transport: {
       target: 'pino-pretty',
       options: { translateTime: 'SYS:standard', ignore: 'pid,hostname' }
     }
   }
 });
 const mainRoutes = require('./routes/mainRoutes');
 fastify.register(mainRoutes);
 fastify.listen({ port: 3000 }, (err, address) => {
   if (err) { fastify.log.error(err); process.exit(1); }
   console.log(`\n🚀 Server is running on ${address}\n`);
 });
</code></pre>
        <img src="img/12-juin---1.jpg" alt="Fastify server running output" width="100%">
      </li>
      <li>
        <h4>📄 Basic GET Route</h4>
        <p>This screenshot shows the <code>/</code> route returning a welcome message using Fastify.</p>
        <pre><code>exports.home = async (request, reply) => {
   reply.send({ message: 'Welcome to Zakaria\'s Fastify server!' });
 };
</code></pre>
        <img src="img/12-juin---2.jpg" alt="GET / route response" width="100%">
      </li>
      <li>
        <h4>🧾 JSON Response from /about</h4>
        <p>The <code>/about</code> route returns a JSON object as expected.</p>
        <pre><code>exports.about = async (request, reply) => {
   reply.send({
     name: 'Zakaria Tanan',
     learning: 'Node.js & Fastify',
     date: 'June 12, 2025'
   });
 };
</code></pre>
        <img src="img/12-juin---3.jpg" alt="GET /about route JSON response" width="100%">
      </li>
      <li>
        <h4>📥 GET/POST Request</h4>
        <p>Tested the <code>/login</code> route with user credentials.</p>
        <img src="img/12-juin---4.jpg" alt="POST /login with JSON body in Postman" width="100%">
        <pre><code>exports.login = async (request, reply) => {
   const { username, password } = request.body;
   if (username === 'zakaria' && password === 'secret') {
     reply.send({ status: 'success', message: 'Login successful!' });
   } else {
     reply.code(401).send({ status: 'fail', message: 'Invalid credentials' });
   }
 };
</code></pre>
        <img src="img/12-juin---5.jpg" alt="POST /login with JSON body in Postman" width="100%">
        <img src="img/12-juin---6.jpg" alt="POST /login with JSON body in Postman" width="100%">
      </li>
    </ol>

    <h3>🧠 Key Learnings</h3>
    <p>
      Today I learned how to use Fastify as a modern alternative to the native <code>http</code> module. It provides an
      easier syntax, built-in body parsing, and cleaner routing. Fastify helped me structure my server code better and
      prepare for more advanced backend features like middleware and authentication.
    </p>

    <h3>🔜 What’s Next (Day 4 Preview)</h3>
    <p>
      Tomorrow, I will begin transforming my <strong>Vue-only quiz app</strong> — which I built fully on the frontend
      using just Vue.js — into a <strong>secure, professional full-stack web app</strong> by:
    </p>
    <ul>
      <li><strong>Vue = Frontend Only</strong><br>
        I already built all quiz pages, logic, and design using Vue, including:
        <ul>
          <li>User interface</li>
          <li>Quiz questions and answers</li>
          <li>Navigation between components</li>
          <li>Score calculations</li>
        </ul>
      </li>
    </ul>

    <ul>
      <li><strong>Fastify + Node.js = Backend</strong><br>
        Now I’ll start adding a real backend using Fastify to handle:
        <ul>
          <li><strong>Authentication (Login/Register)</strong><br>
            - Accept user inputs<br>
            - Hash passwords using <code>bcrypt</code><br>
            - Issue JWT tokens on login<br>
            - Store and validate sessions securely
          </li>
          <li><strong>Routing & APIs</strong><br>
            - Dynamic routes like <code>/api/quiz/:id</code><br>
            - <code>POST /api/submit/:quizId</code> for answers<br>
            - Use <code>fastify-cors</code>, <code>fastify-formbody</code>, <code>fastify-jwt</code>, etc.
          </li>
          <li><strong>Database Setup (SQLite)</strong><br>
            - <code>users</code> table for auth<br>
            - <code>quizzes</code>, <code>questions</code>, <code>answers</code>, <code>scores</code> tables<br>
            - SQLite for lightweight, easy-to-manage dev database
          </li>
        </ul>
      </li>
    </ul>
  </div>


  <!-- June 13 log -->
  <!-- <div class="section" id="log13" style="display: none;">
  <h2>📅 June 13, 2025 — Fastify Plugins, JWT Auth, and Frontend-Backend Integration</h2>

  <h3>✅ Accomplishments</h3>
  <ul>
    <li>Integrated important Fastify plugins:
      <ul>
        <li><code>@fastify/cors</code> — enabled CORS support</li>
        <li><code>@fastify/formbody</code> — allowed parsing of form-encoded bodies</li>
        <li><code>@fastify/jwt</code> — used for handling JSON Web Tokens</li>
      </ul>
    </li>
    <li>Set up authentication logic in Fastify backend:
      <ul>
        <li>Created POST routes for <code>/register</code> and <code>/login</code></li>
        <li>Used <code>bcrypt</code> to hash and compare passwords securely</li>
        <li>Issued JWT tokens on successful login</li>
        <li>Protected routes using <code>fastify-jwt</code>'s verify method</li>
      </ul>
    </li>
    <li>Tested JWT token generation and validation with protected routes</li>
    <li>Restructured and modularized backend server using separate route files</li>
    <li>Set up <code>nodemon</code> to auto-restart backend server during development</li>
    <li>Created combined dev script using <code>concurrently</code> to run frontend and backend at once</li>
    <li>Tested end-to-end communication between Vue frontend and Fastify backend using fetch calls</li>
    <li>Handled frontend login form submission and successfully received JWT from backend</li>
  </ul>

  <h3>📂 Project Structure Progress</h3>
  <pre><code>📁 vue-fastify-quiz
├── 📁 client
│   └── Vue 3 Quiz Frontend (Vite, Pinia, Vue Router)
├── 📁 server
│   ├── server.js
│   ├── 📁 routes
│   │   ├── auth.js
│   └── 📁 controllers
│       └── authController.js
├── package.json (root)
</code></pre>

  <h3>🧠 Key Learnings</h3>
  <p>
    Today I successfully connected the Vue frontend to the Fastify backend. I implemented user authentication using JWT
    and bcrypt, and modularized my server logic to prepare for future routes. I also learned how to secure routes, manage
    sessions with tokens, and create a full development workflow using <code>concurrently</code>.
  </p>

  <h3>🔜 What’s Next (Day 5 Preview)</h3>
  <p>
    Tomorrow, I will begin integrating the <strong>SQLite database</strong> into the backend to persist real data. This includes:
  </p>
  <ul>
    <li>Installing and configuring SQLite (maybe with <code>better-sqlite3</code> or <code>sqlite3</code>)</li>
    <li>Creating database tables:
      <ul>
        <li><code>users</code> — to store hashed credentials</li>
        <li><code>quizzes</code>, <code>questions</code>, <code>answers</code>, <code>scores</code></li>
      </ul>
    </li>
    <li>Connecting routes to read/write from the database</li>
    <li>Refactoring login and register to persist users in SQLite</li>
    <li>Fetching quiz data dynamically from the DB</li>
  </ul>
</div> -->


  <!-- June 13 log -->
  <!-- <div class="section" id="log13" style="display: none;">
  <h2>📅 June 13, 2025 — Fastify Auth Backend & Vue Frontend Integration</h2>

  <h3>✅ Accomplishments</h3>
  <ul>
    <li>Moved the <code>data/</code> folder (users.json, questions.json, quizzes.json) from <code>src/</code> to <code>server/</code></li>
    <li>Created a Fastify backend from scratch with the following features:
      <ul>
        <li><code>@fastify/cors</code> — enabled CORS for frontend communication</li>
        <li><code>@fastify/formbody</code> — handled form submissions</li>
        <li><code>@fastify/jwt</code> — used to sign and verify login tokens</li>
        <li><code>bcrypt</code> — securely hashed passwords during registration</li>
        <li>Read and wrote user data to <code>server/data/users.json</code></li>
      </ul>
    </li>
    <li>Implemented <code>/api/register</code> and <code>/api/login</code> routes:
      <ul>
        <li>Registration endpoint hashes and saves new users</li>
        <li>Login endpoint verifies credentials and issues JWT token</li>
      </ul>
    </li>
    <li>Built a Vue 3 registration page with animated form and fetch request to the backend</li>
    <li>Updated the login page to:
      <ul>
        <li>Send POST request to backend with credentials</li>
        <li>Store JWT token and email in <code>localStorage</code></li>
        <li>Dispatch a custom event <code>user-logged-in</code> to update the app</li>
      </ul>
    </li>
    <li>Tested full frontend-backend registration and login flow</li>
  </ul>

  <h3>📂 Project Structure Progress</h3>
  <pre><code>📁 vue-fastify-quiz
├── 📁 client
│   └── Vue 3 Quiz Frontend (Vite)
├── 📁 server
│   ├── server.js
│   └── 📁 data
│       ├── users.json
│       ├── questions.json
│       └── quizzes.json
</code></pre>

  <h3>🧠 Key Learnings</h3>
  <p>
    I learned how to handle form submissions securely using Fastify, hash and store passwords with bcrypt, and issue tokens using JWT. 
    I also practiced connecting a Vue 3 frontend to a Fastify backend using fetch, and managing login sessions via localStorage.
  </p>

  <h3>🔜 What’s Next (Day 5 Preview)</h3>
  <p>
    Tomorrow, I plan to:
  </p>
  <ul>
    <li>Add token-based protection for future quiz routes</li>
    <li>Clean up fetch error handling and frontend UX</li>
    <li>Begin planning for database migration (SQLite or MongoDB)</li>
    <li>Optional: Add a logout mechanism and token validation middleware</li>
  </ul>
</div> -->


  <!-- June 13 log -->
  <!-- <div class="section" id="log13" style="display: none;">
    <h2>📅 June 13, 2025 — Fastify Plugins, JWT Auth, and Frontend-Backend Integration</h2>

    <h3>✅ Accomplishments</h3>
    <ul>
      <li>Integrated important Fastify plugins:
        <ul>
          <li><code>@fastify/cors</code> — enabled CORS support</li>
          <li><code>@fastify/formbody</code> — allowed parsing of form-encoded bodies</li>
          <li><code>@fastify/jwt</code> — used for handling JSON Web Tokens</li>
        </ul>
      </li>
      <li>Set up authentication logic in Fastify backend:
        <ul>
          <li>Created POST routes for <code>/register</code> and <code>/login</code></li>
          <li>Used <code>bcrypt</code> to hash and compare passwords securely</li>
          <li>Issued JWT tokens on successful login</li>
          <li>Protected routes using <code>fastify-jwt</code>'s verify method</li>
        </ul>
      </li>
      <li>Added backend routes to serve:
        <ul>
          <li><code>/api/quizzes/:categoryId</code> — quizzes per category</li>
          <li><code>/api/questions/:quizId</code> — questions per quiz</li>
          <li><code>/api/quizzes</code> — all quizzes</li>
        </ul>
      </li>
      <li>Used JSON files (<code>users.json</code>, <code>quizzes.json</code>, <code>questions.json</code>) as
        lightweight backend DB</li>
      <li>Handled reading/writing user data and serving quiz/question data via the backend</li>
      <li>Updated <code>QuizStart</code> component to fetch quizzes from backend instead of local file</li>
      <li>Refactored <code>QuizQuestions</code> to:
        <ul>
          <li>Fetch questions dynamically using <code>/api/questions/:quizId</code></li>
          <li>Fetch all quizzes to display the quiz title</li>
          <li>Handle loading/error states</li>
        </ul>
      </li>
      <li>Tested full flow: Register → Login → Fetch quizzes → Take quiz → See results</li>
    </ul>

    <h3>📂 Project Structure Progress</h3>
    <pre><code>📁 vue-fastify-quiz
├── 📁 client
│   └── Vue 3 Quiz Frontend (Vite, Pinia, Vue Router)
├── 📁 server
│   ├── server.js
│   ├── 📁 data
│   │   ├── users.json
│   │   ├── quizzes.json
│   │   └── questions.json
├── package.json (root)
</code></pre>

    <h3>🧠 Key Learnings</h3>
    <p>
      Today I implemented dynamic quiz and question fetching using Fastify and JSON data files. I learned how to
      structure API endpoints that return filtered data, how to replace hardcoded frontend logic with real API calls,
      and how to manage quiz flow with dynamic Vue routing and state. This brought the project much closer to a
      real-world architecture.
    </p>

    <h3>🔜 What’s Next (Day 5 Preview)</h3>
    <p>
      Tomorrow, I will begin integrating the <strong>SQLite database</strong> into the backend to persist real data.
      This includes:
    </p>
    <ul>
      <li>Installing and configuring SQLite (maybe with <code>better-sqlite3</code> or <code>sqlite3</code>)</li>
      <li>Creating database tables:
        <ul>
          <li><code>users</code> — to store hashed credentials</li>
          <li><code>quizzes</code>, <code>questions</code>, <code>answers</code>, <code>scores</code></li>
        </ul>
      </li>
      <li>Connecting routes to read/write from the database</li>
      <li>Refactoring login and register to persist users in SQLite</li>
      <li>Fetching quiz data dynamically from the DB</li>
    </ul>
  </div> -->

  <!-- June 13 log -->
  <div class="section" id="log13" style="display: none;">
    <h2>📅 June 13, 2025 — Fastify Auth Backend & Vue Frontend Integration</h2>

    <h3>✅ Accomplishments</h3>
    <ul>
      <li>Moved the <code>data/</code> folder (users.json, questions.json, quizzes.json) from <code>src/</code> to
        <code>server/</code>
      </li>
      <li>Created a Fastify backend from scratch with the following features:
        <ul>
          <li><code>@fastify/cors</code> — enabled CORS for frontend communication and support</li>
          <li><code>@fastify/formbody</code> — handled form submissions and allowed parsing of form-encoded bodies</li>
          <li><code>@fastify/jwt</code> — used to sign, verify login tokens and handle JSON Web Tokens</li>
          <li><code>bcrypt</code> — securely hashed passwords during registration and compared passwords securely</li>
          <li>Read and wrote user data to <code>server/data/users.json</code> as a lightweight backend DB</li>
        </ul>
      </li>
      <li>Implemented backend routes:
        <ul>
          <li><code>/api/register</code> — registration endpoint hashes and saves new users</li>
          <li><code>/api/login</code> — login endpoint verifies credentials and issues JWT tokens</li>
          <li><code>/api/quizzes/:categoryId</code> — quizzes per category</li>
          <li><code>/api/questions/:quizId</code> — questions per quiz</li>
          <li><code>/api/quizzes</code> — all quizzes</li>
        </ul>
      </li>
      <li>Built Vue 3 frontend features:
        <ul>
          <li>Registration page with animated form and fetch request to backend</li>
          <li>Login page that sends POST requests with credentials, stores JWT token and email in
            <code>localStorage</code>, and dispatches a <code>user-logged-in</code> event
          </li>
          <li>Updated <code>QuizStart</code> component to fetch quizzes from backend instead of local file</li>
          <li>Refactored <code>QuizQuestions</code> to fetch questions dynamically, fetch all quizzes to display titles,
            and handle loading/error states</li>
        </ul>
      </li>
      <li>Tested full flow: Register → Login → Fetch quizzes → Take quiz → See results</li>
    </ul>

    <h3>📂 Project Progress</h3>
    <ol style="padding-left: 25px;">
      <li>
        <h4>🧪 Running Frontend & Backend Together</h4>
        <p>Configured <code>package.json</code> scripts to run both Vue frontend and Fastify backend in parallel using
          <code>concurrently</code>.
        </p>
        <pre><code>"scripts": {
  "dev": "vite",
  "backend": "nodemon ./server/server.js",
  "start": "concurrently \"npm run dev\" \"npm run backend\"",
  "build": "vite build",
  "preview": "vite preview"
}</code></pre>
        <img src="img/13-juin---1.jpg" alt="Terminal output showing both servers running" width="100%">
      </li>

      <li>
        <h4>🔌 Fastify Plugins Setup</h4>
        <p>Installed and integrated core Fastify plugins for CORS, form parsing, and JWT authentication.</p>
        <pre><code>import Fastify from 'fastify'
 import cors from '@fastify/cors'
 import formbody from '@fastify/formbody'
 import jwt from '@fastify/jwt'
 import bcrypt from 'bcrypt'
-------------------------------------------------------
 const fastify = Fastify()
 await fastify.register(cors, { origin: true })
 await fastify.register(formbody)
 await fastify.register(jwt, { secret: 'supersecret' })
</code></pre>
      </li>

      <li>
        <h4>🔐 Authentication Backend</h4>
        <p>Implemented registration and login routes with secure password hashing and JWT issuance.</p>
        <pre><code>fastify.post('/api/register', async (req, reply) => {
    const { email, password } = req.body
    const users = await loadUsers()
    if (users.find(user => user.email === email)) {
      return reply.code(400).send({ error: 'Email already registered' })
    }
    const hashed = await bcrypt.hash(password, 10)
    users.push({ email, password: hashed })
    await saveUsers(users)
    return reply.send({ success: true })
 })
</code></pre>
        <img src="img/13-juin---2.jpg" alt="Registration route test screenshot" width="100%">
        <pre><code>fastify.post('/api/login', async (req, reply) => {
    const { email, password } = req.body
    const users = await loadUsers()
    const user = users.find(u => u.email.toLowerCase() === email.toLowerCase())
    if (!user) { return reply.code(401).send({ error: 'Invalid credentials' }) }
    const isValid = await bcrypt.compare(password, user.password)
    if (!isValid) { return reply.code(401).send({ error: 'Invalid credentials' }) }
    const token = fastify.jwt.sign({ email: user.email })
    return reply.send({ token })
 })
</code></pre>
      </li>

      <li>
        <h4>🌐 API Routes for Quizzes & Questions</h4>
        <p>Added API routes to serve quizzes by category, questions by quiz, and all quizzes.</p>
        <pre><code>fastify.get('/api/quizzes/:categoryId', async (req, reply) => {
    const { categoryId } = req.params
    const quizzes = quizzesData[categoryId]
    if (!quizzes) {
      return reply.code(404).send({ error: 'No quizzes found for this category' })
    }
    return reply.send(quizzes)
 })
</code></pre>
        <pre><code>fastify.get('/api/questions/:quizId', async (req, reply) => {
    const { quizId } = req.params;
    const questionsData = await loadQuestions();
    const questions = questionsData[quizId];
    if (!questions) {
      return reply.code(404).send({ error: 'No questions found for this quiz' });
    }
    return reply.send(questions);
 });
</code></pre>
        <pre><code>async function loadQuestions() {
    const data = await fs.readFile(path.join(__dirname, 'data/questions.json'), 'utf-8');
    return JSON.parse(data);
 }

 fastify.get('/api/quizzes', async (req, reply) => {
    return reply.send(quizzesData);
 });
</code></pre>
      </li>

      <li>
        <h4>✅ Full Flow Testing</h4>
        <p>Tested complete user journey: register, login, fetch quizzes, take quiz, and view results.</p>
      </li>
    </ol>

    <h3>🧠 Key Learnings</h3>
    <p>
      I learned how to handle form submissions securely using Fastify, hash and store passwords with bcrypt, and issue
      tokens using JWT.
      I also practiced connecting a Vue 3 frontend to a Fastify backend using fetch, and managing login sessions via
      localStorage.
    </p>
    <p>
      Additionally, I implemented dynamic quiz and question fetching using Fastify and JSON data files. I learned how to
      structure API endpoints that return filtered data, how to replace hardcoded frontend logic with real API calls,
      and how to manage quiz flow with dynamic Vue routing and state. This brought the project much closer to a
      real-world architecture.
    </p>

    <h3>🔜 What’s Next (Day 5 Preview)</h3>
    <p>
      Since I’ve been using <code>.json</code> files for all my data so far, tomorrow I plan to begin the transition to
      a proper database setup with SQLite. Here’s what’s next:
    </p>
    <ul>
      <li>🔐 Add token-based protection to quiz-related routes (e.g., using middleware)</li>
      <li>🛠️ Improve frontend UX and handle fetch errors more gracefully</li>
      <li>🗃️ Set up SQLite for persistent data storage</li>
      <li>⚙️ Install and configure <code>sqlite3</code> or <code>better-sqlite3</code> package</li>
      <li>📁 Create database schema with the following tables:
        <ul>
          <li><code>users</code> — for storing emails and hashed passwords</li>
          <li><code>quizzes</code>, <code>questions</code>, <code>answers</code>, and <code>scores</code></li>
        </ul>
      </li>
      <li>🔄 Refactor <code>/register</code> and <code>/login</code> to use SQLite instead of JSON</li>
      <li>📡 Dynamically fetch quizzes and questions from the database</li>
    </ul>




    <!-- <ul>
  <li><strong>Vue ↔️ Fastify Integration</strong><br>
      Replace mock frontend data with real API calls:
    <ul>
      <li>Use <code>axios</code> in Vue to call backend routes</li>
      <li>Store JWT tokens in localStorage</li>
      <li>Use Vue to show real quiz data and secure user scores</li>
    </ul>
  </li>
</ul> -->


    <!-- <ul>
  <li><strong>Final Goal</strong><br>
      Turn the static Vue quiz project into a <strong>professional full-stack app</strong> where:
    <ul>
      <li>Backend handles all security, storage, and APIs</li>
      <li>Frontend stays clean and focused on UX/UI</li>
      <li>Authentication is secure</li>
      <li>Data is persistent</li>
      <li>Architecture is scalable</li>
    </ul>
  </li>
</ul> -->



    <footer>
      <p>Maintained by Zakaria Tanan — <a href="mailto:tananzakaria630@gmail.com">tananzakaria630@gmail.com</a></p>
    </footer>

    <script>
      function showLog(id) {
        document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
        document.getElementById(id).style.display = 'block';
      }

      // Show June 10 log by default
      window.onload = () => showLog('log13');
    </script>
</body>

</html>